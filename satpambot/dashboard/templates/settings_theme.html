{% extends "base.html" %}
{% block title %}Theme & Branding{% endblock %}
{% block content %}
<div class="card">
  <h2 style="margin:0 0 12px">ğŸ¨ Theme & Branding</h2>

  <form action="/theme/apply" method="post" style="display:grid;gap:14px">
    <div style="display:grid;gap:8px">
      <label>Mode Tema</label>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <label><input type="radio" name="mode" value="dark"  {% if theme_mode=='dark' %}checked{% endif %}> Dark</label>
        <label><input type="radio" name="mode" value="light" {% if theme_mode=='light' %}checked{% endif %}> Light</label>
        <label><input type="radio" name="mode" value="auto"  {% if theme_mode=='auto' %}checked{% endif %}> Auto (ikut OS)</label>
      </div>
    </div>

    <div style="display:grid;gap:8px">
      <label>Background URL (opsional, akan disimpan ke server)</label>
      <input type="text" name="bg_url" placeholder="https://..." value="{{ bg_url or '' }}">
      <label style="display:flex;align-items:center;gap:8px">
        <input type="checkbox" name="use_on_login" value="1" {% if use_bg_on_login %}checked{% endif %}>
        Gunakan background ini juga untuk halaman login
      </label>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a href="/theme/list" class="btn">ğŸ“ Lihat daftar background</a>
        <a href="#" class="btn" onclick="previewBg();return false;">ğŸ‘ï¸ Preview</a>
        <a href="#" class="btn" onclick="saveBgLocal();return false;">ğŸ’¾ Simpan ke Local (client)</a>
      </div>
    </div>

    <div style="display:grid;gap:8px">
      <label>Logo URL (opsional)</label>
      <input type="text" name="logo_url" placeholder="https://..." value="{{ logo_url or '' }}">
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a href="#" class="btn" onclick="saveLogoLocal();return false;">ğŸ’¾ Simpan Logo ke Local</a>
      </div>
    </div>

    <button class="btn primary" type="submit">Simpan ke Server</button>
  </form>

  <hr style="margin:20px 0;border:none;border-top:1px solid var(--border)">

  <div style="display:grid;gap:12px">
    <h3>Upload File</h3>
    <form action="/upload/background" method="post" enctype="multipart/form-data" style="display:flex;gap:10px;flex-wrap:wrap">
      <input type="file" name="background" accept="image/*">
      <button class="btn" type="submit">Upload Background</button>
    </form>
    <form action="/upload/logo" method="post" enctype="multipart/form-data" style="display:flex;gap:10px;flex-wrap:wrap">
      <input type="file" name="logo" accept="image/*">
      <button class="btn" type="submit">Upload Logo</button>
    </form>
  </div>
</div>

<script>
  function previewBg(){
    const v = document.querySelector('input[name="bg_url"]').value.trim();
    if(!v) return alert('Masukkan BG URL dulu');
    document.documentElement.style.setProperty('--bg-image', `url("${v}")`);
  }
  function saveBgLocal(){
    const v = document.querySelector('input[name="bg_url"]').value.trim();
    if(!v) return alert('Masukkan BG URL dulu');
    localStorage.setItem('bgUrl', v);
    alert('Background disimpan ke localStorage âœ”');
  }
  function saveLogoLocal(){
    const v = document.querySelector('input[name="logo_url"]').value.trim();
    if(!v) return alert('Masukkan Logo URL dulu');
    localStorage.setItem('logoUrl', v);
    alert('Logo disimpan ke localStorage âœ”');
  }
</script>
{% endblock %}
