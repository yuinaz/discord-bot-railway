
<!-- Ensure theme link is present -->
<link id="theme-stylesheet" rel="stylesheet" href="{{ theme_path or '/static/themes/dark.css' }}">
<script>
// Toggle icon (if exists) switches dark/light
(function(){
  const btn = document.getElementById('toggleTheme');
  if(!btn) return;
  btn.addEventListener('click', async function(){
    const link = document.getElementById('theme-stylesheet');
    const current = (link.getAttribute('href')||'').split('/').pop();
    const next = current === 'dark.css' ? 'light.css' : 'dark.css';
    await fetch('/theme?set=' + next);
    location.reload();
  });
})();
</script>
